<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Environmental data from an extent with raadtools • raadtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Environmental data from an extent with raadtools">
<meta property="og:description" content="raadtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">raadtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0.9022</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/chlorophyll.html">Remotely Sensed Ocean Colour (Chlorophyll) in raadtools</a>
    </li>
    <li>
      <a href="../articles/extract-extent.html">Environmental data from an extent with raadtools</a>
    </li>
    <li>
      <a href="../articles/installraadtools.html">raadtools installation</a>
    </li>
    <li>
      <a href="../articles/raad-sea-ice.html">Sea Ice Concentation Data in raadtools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/AustralianAntarcticDivision/raadtools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="extract-extent_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Environmental data from an extent with raadtools</h1>
                        <h4 class="author">Michael Sumner and Jaimie Cleeland</h4>
            
            <h4 class="date">2021-08-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/AustralianAntarcticDivision/raadtools/blob/master/vignettes/extract-extent.Rmd"><code>vignettes/extract-extent.Rmd</code></a></small>
      <div class="hidden name"><code>extract-extent.Rmd</code></div>

    </div>

    
    
<p>The <code>raadtools</code> package contains a number of <code>read[something]</code> functions, mostly for gridded time-series remote sensing data.</p>
<p>All of the read functions have an “xylim” argument, which will take a <code><a href="https://rdrr.io/pkg/raster/man/extent.html">raster::extent(xmin, xmax, ymin, ymax)</a></code>. E.g.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: raster</code></pre>
<pre><code>## Loading required package: sp</code></pre>
<pre><code>## global option 'raadfiles.data.roots' set:
## '/rdsi/PRIVATE/raad/data               2021-06-10 11:27:17
##  /rdsi/PRIVATE/raad/data_local         2021-06-10 11:33:25
##  /rdsi/PRIVATE/raad/data_staging       2021-06-10 11:33:28
##  /rdsi/PRIVATE/raad/data_deprecated    2021-06-10 11:34:11
##  /rdsi/PUBLIC/raad/data                2021-06-10 11:13:58'</code></pre>
<pre><code>## Uploading raad file cache as at 2021-08-02 02:09:33 (1147322 files listed)</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: dplyr</code></pre>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:raster':
## 
##     intersect, select, union</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre><code>## Loading required package: memoise</code></pre>
<pre><code>## Loading required package: tibble</code></pre>
<pre><code>## Loading required package: vroom</code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/readsst.html">readsst</a></span><span class="op">(</span><span class="st">"2010-01-01"</span>, xylim <span class="op">=</span> <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## class      : RasterLayer 
## dimensions : 40, 240, 9600  (nrow, ncol, ncell)
## resolution : 0.25, 0.25  (x, y)
## extent     : 100, 160, -50, -40  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +no_defs 
## source     : memory
## names      : Daily.sea.surface.temperature 
## values     : 4.41, 19.24  (min, max)
## time       : 2010-01-01</code></pre>
<p>That extent must make sense for the data set though, so see what this returns first (it will be a longlat-grid in [-180, 180, -90, 90].</p>
<p>Note that we ran the function above <em>without saving the result anywhere</em>, so we just saw a print-out summary of the result but it is now discarded.</p>
<p>That is a useful technique to see what a function does, since it will return a layer by default. This can be plotted or used by other functions, and so is the best way to learn about the data source.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span>
<span class="fu"><a href="../reference/readsst.html">readsst</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## class      : RasterLayer 
## dimensions : 720, 1440, 1036800  (nrow, ncol, ncell)
## resolution : 0.25, 0.25  (x, y)
## extent     : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +no_defs 
## source     : memory
## names      : Daily.sea.surface.temperature 
## values     : -1.8, 34.63  (min, max)
## time       : 2021-07-28</code></pre>
<p>That works for <code>readssh</code>, <code>readcurr</code>, and <code>readwind</code> just the same, and the date argument can be a single date or a vector of them. In the <code>raster</code> package there are single <code>RasterLayer</code> objects and multi-layer <code>RasterBrick</code> (or <code>RasterStack</code>) objects. Raadtools will usually return a RasterStack or a RasterLayer, and it will record the time-step/s on the data as well (when relevant). After the read function is finished we are back to using the <code>raster</code> package, so familiarity with that package and its documentation is important.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">"Raster"</span>, package<span class="op">=</span> <span class="st">"raster"</span><span class="op">)</span></code></pre></div>
<p>Some of the functions respect <code>lon180 = FALSE</code> because they have a grid that was originally in <code>[0, 360, -90, 90]</code> and in that case it can be faster to use that domain for the extent rather than the common <code>[-180, 180, -90, 90]</code> one. (Please feel free to ask about this for specific data sets, it’s one of those boring details).</p>
<p>For ice, and some other data, the grids are not in longlat so <code>xylim</code> needs an extent in that projection. You can always draw one like this, with code that must be run interactively as the plot will wait for you to click twice on the plot (defining a rectangle) before the <code>e</code> object is created.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readice.html">readice</a></span><span class="op">(</span><span class="op">)</span>  
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ice</span><span class="op">)</span>
<span class="va">e</span> <span class="op">&lt;-</span> <span class="fu">drawExtent</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<p><img src="extract-extent_files/figure-html/unnamed-chunk-6-1.png" width="700"> Notice that we can also make <code>Extent</code> objects from scratch, and perform operations on them.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_extent</span> <span class="op">&lt;-</span> <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">120</span>, <span class="op">-</span><span class="fl">40</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span>
<span class="va">my_extent</span></code></pre></div>
<pre><code>## class      : Extent 
## xmin       : 100 
## xmax       : 120 
## ymin       : -40 
## ymax       : -20</code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_extent</span> <span class="op">+</span> <span class="fl">10</span></code></pre></div>
<pre><code>## class      : Extent 
## xmin       : 95 
## xmax       : 125 
## ymin       : -45 
## ymax       : -15</code></pre>
<p>otherwise there are functions <code>projectExtent</code> and some others to do it more automatically. It’s not that straightforward because of the polar aspect.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span>
<span class="va">ice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readice.html">readice</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rex</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="op">(</span> <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">70</span>, <span class="op">-</span><span class="fl">50</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span>
<span class="va">pex</span> <span class="op">&lt;-</span> <span class="fu">projectExtent</span><span class="op">(</span><span class="va">rex</span>, <span class="fu">projection</span><span class="op">(</span><span class="va">ice</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs

## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## pex is a raster, not just an extent but that's good because</span>
<span class="co">## it also has the CRS (it's nonsense to have an extent without CRS, but that's life)</span>
<span class="va">ice_ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readice.html">readice</a></span><span class="op">(</span><span class="st">"2016-09-01"</span>, xylim <span class="op">=</span> <span class="va">pex</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs

## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ice_ex</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html">grey</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, length <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>, zlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="extract-extent_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Please note that the <code>xylim</code> argument just applies <code>crop</code>, so you can avoid it altogether and do it after the fact.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span>
<span class="fu">crop</span><span class="op">(</span><span class="fu"><a href="../reference/readsst.html">readsst</a></span><span class="op">(</span><span class="op">)</span>,  <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">40</span><span class="op">)</span>, snap <span class="op">=</span> <span class="st">"out"</span><span class="op">)</span></code></pre></div>
<pre><code>## class      : RasterLayer 
## dimensions : 40, 240, 9600  (nrow, ncol, ncell)
## resolution : 0.25, 0.25  (x, y)
## extent     : 100, 160, -50, -40  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +no_defs 
## source     : memory
## names      : Daily.sea.surface.temperature 
## values     : 3.27, 16.22  (min, max)
## time       : 2021-07-28</code></pre>
<p>(Internally <code>raadtools</code> always uses <code>snap=out</code> since that makes sure the intersection is <em>inclusive</em>, i.e. any overlapping part of a pixel means that pixel is included in the result. By default <code>crop</code> would drop partial overlaps on the edge).</p>
<p>If there’s a really long time series though it will be better to do that with xylim, and even to pass it out to a file:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readsst.html">readsst</a></span><span class="op">(</span><span class="va">dates</span>,  xylim <span class="op">=</span> <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">40</span><span class="op">)</span>, filename <span class="op">=</span> <span class="st">"mymegasplat.grd"</span><span class="op">)</span></code></pre></div>
<p>More details … TBD</p>
<div id="extending-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#extending-maps" class="anchor"></a>Extending maps</h2>
<p>With two examples from above.</p>
<p>Plot the projected data with a graticule, and add a “transect”.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span>
<span class="va">ice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readice.html">readice</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rex</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="op">(</span> <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">70</span>, <span class="op">-</span><span class="fl">50</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span>
<span class="va">pex</span> <span class="op">&lt;-</span> <span class="fu">projectExtent</span><span class="op">(</span><span class="va">rex</span>, <span class="fu">projection</span><span class="op">(</span><span class="va">ice</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs

## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## pex is a raster, not just an extent but that's good because</span>
<span class="co">## it also has the CRS (it's nonsense to have an extent without CRS, but that's life)</span>
<span class="va">ice_ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readice.html">readice</a></span><span class="op">(</span><span class="st">"2016-09-01"</span>, xylim <span class="op">=</span> <span class="va">pex</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs

## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs</code></pre>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## create a graticule for this region</span>

<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">graticule</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/graticule/man/graticule.html">graticule</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, by <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">75</span>, <span class="op">-</span><span class="fl">50</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, proj <span class="op">=</span> <span class="fu">projection</span><span class="op">(</span><span class="va">ice</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj
## = prefer_proj): Discarded ellps unknown in Proj4 definition: +proj=stere
## +lat_0=-90 +lat_ts=-70 +lon_0=0 +x_0=0 +y_0=0 +a=6378273 +b=6356889.449 +units=m
## +no_defs +type=crs

## Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj =
## prefer_proj): Discarded datum unknown in Proj4 definition</code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ice_ex</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html">grey</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, length <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>, zlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, 
     addfun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, lty <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span><span class="op">)</span>

<span class="co">## add a "transect"</span>
<span class="va">lons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">transect</span> <span class="op">&lt;-</span> <span class="fu">rgdal</span><span class="fu">::</span><span class="fu"><a href="http://rgdal.r-forge.r-project.org/reference/project.html">project</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">lons</span>, <span class="op">-</span><span class="fl">63</span><span class="op">)</span>, <span class="fu">projection</span><span class="op">(</span><span class="va">ice_ex</span><span class="op">)</span><span class="op">)</span>


<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">transect</span>, cex <span class="op">=</span> <span class="fl">0.5</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span></code></pre></div>
<p><img src="extract-extent_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Extract values at specific points.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span>
<span class="va">iceconc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract.html">extract</a></span><span class="op">(</span><span class="va">ice_ex</span>, <span class="va">transect</span>, method <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">lons</span>, <span class="va">iceconc</span>, main <span class="op">=</span> <span class="st">"ice concentration at latitude -65 between 100E and 160E"</span><span class="op">)</span></code></pre></div>
<p><img src="extract-extent_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Plot mean SST and contour.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/raadtools">raadtools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">raadfiles</span><span class="op">)</span>
<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2016-01-01"</span><span class="op">)</span>, length <span class="op">=</span> <span class="fl">31</span>, by <span class="op">=</span> <span class="st">"1 day"</span><span class="op">)</span>
<span class="va">sst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readsst.html">readsst</a></span><span class="op">(</span><span class="va">dates</span>,  xylim <span class="op">=</span> <span class="fu">extent</span><span class="op">(</span><span class="fl">100</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span>
<span class="va">msst</span> <span class="op">&lt;-</span> <span class="fu">calc</span><span class="op">(</span><span class="va">sst</span>, <span class="va">mean</span><span class="op">)</span>
<span class="va">sdsst</span> <span class="op">&lt;-</span> <span class="fu">calc</span><span class="op">(</span><span class="va">sst</span>, <span class="va">sd</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">msst</span>, col <span class="op">=</span> <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html">viridis</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"mean SST Jan 2016"</span>,  addfun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/contour.html">contour</a></span><span class="op">(</span><span class="va">sdsst</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="extract-extent_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
